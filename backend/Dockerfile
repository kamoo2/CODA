# ðŸ”§ 1ë‹¨ê³„: Build stage
FROM gradle:8.5-jdk17 AS builder

WORKDIR /app
COPY --chown=gradle:gradle . .
RUN gradle build -x test

# âœ… 2ë‹¨ê³„: Runtime stage
FROM eclipse-temurin:17-jdk

WORKDIR /app

# âœ… Docker CLI ì„¤ì¹˜ (Optional)
RUN apt-get update && \
    apt-get install -y docker.io && \
    rm -rf /var/lib/apt/lists/*

COPY --from=builder /app/build/libs/*.jar app.jar

# âœ… ë””ë²„ê·¸ìš© ENTRYPOINT
ENTRYPOINT ["java", "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005", "-jar", "app.jar"]
